<template name="invite">
  <div class="invite-wrapper">
    <h2>Manage Users</h2>
  </div>
  <div class="invite-wrapper with-border">
    <div class="invite-header">
      <form class="send-invite">
        <input class="floating-input" type="email">
        <button class="mini ui button invite-button">Send Invite</button>
      </form>
      <div class="invite-account-stats">
        <div class="account-stats-numbers">
          {{numUsers}} / {{maxUsers}}
        </div>
        <div class="account-stats-text">
          Accounts Used
        </div>
      </div>
    </div>
    <h5 class="accounts-title">Organization Accounts</h5>
    <div class="ui divided selection list">
      {{#each users}}
      <a class="item d-flex">
        <div class="account-info d-flex align-items-center">
          <div class="account-label">{{{getUserLabel _id}}}</div>
          <div class="account-email">{{emails.[0].address}}</div>
        </div>
        {{#if accountManagementLink _id}}
          {{#if isOwner _id}}
          Owner
          {{else}}
            <button class="removeAccount ui basic buttont" data-id="{{_id}}">Remove Account</button>
          {{/if}}
        {{else}}
          {{#if isOwner _id}}
          Owner
          {{else}}
            <button class="revokeInvite ui basic button" data-id="{{_id}}">Revoke Invite</button>
          {{/if}}
        {{/if}}
      </a>
      {{/each}}
    </div>
  </div>


  Used: {{numUsers}} / {{maxUsers}}
{{#if canAddMoreUsers}}
  <form class="inviteUser">
    <input type="text" name="email">
    <button type="submit">Send Invite</button>
  </form>
{{else}}
  <form class="newSeats">
    <button class="add-more-users" data-text="Create Additional Seats">Add More Users</button>
  </form>
{{/if}}

<ul>
  {{#each users}}
    <li>
      {{profile.name}} - {{emails.[0].address}}
      {{#if accountManagementLink _id}}
        {{#if isMe _id}}
          Owner
        {{else}}
          <button class="removeAccount" data-id="{{_id}}">Remove Account</button>
        {{/if}}
      {{else}}
        {{#if isMe _id}}
          Owner
        {{else}}
          <button class="revokeInvite" data-id="{{_id}}">Revoke Invite</button>
        {{/if}}
      {{/if}}
    </li>
  {{/each}}
</ul>

</template>
